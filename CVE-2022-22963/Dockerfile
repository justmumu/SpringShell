FROM ubuntu:latest

RUN apt update && apt install maven wget zip unzip -y
RUN wget https://github.com/spring-cloud/spring-cloud-function/archive/refs/tags/v3.1.6.zip
RUN mkdir /opt/app
RUN unzip v3.1.6.zip -d /opt/app
RUN cd /opt/app/spring-cloud-function-3.1.6/spring-cloud-function-samples/function-sample-pojo && mvn package

EXPOSE 8080
CMD ["java", "-jar", "/opt/app/spring-cloud-function-3.1.6/spring-cloud-function-samples/function-sample-pojo/target/function-sample-pojo-2.0.0.RELEASE.jar"]